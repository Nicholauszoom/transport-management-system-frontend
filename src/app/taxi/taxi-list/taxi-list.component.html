<app-main-layout>
  <div class="flex justify-content-center flex-wrap w-full">
    <p-card [style]="{ width: '100%' }" styleClass="m-3">
      <ng-template pTemplate="header">
        <div class="p-card-header flex justify-content-between align-items-center">
          <h2 class="m-0" style="font-size: 1.5rem; color: #003366;">
            <i class="pi pi-tags text-primary" style="font-size: 1.5rem"></i> Bajaji Management
          </h2>


          <div class="button-group">
            <span class="p-input-icon-left">
              <i class="pi pi-search"></i>
              <input pInputText type="text" [(ngModel)]="term" placeholder="Search Bajaji" (input)="searchTaxes()"
                style="width: 250px" />
            </span>
          </div>
        </div>
      </ng-template>

      <!-- Tab Menu -->
      <p-tabMenu [model]="tabItems" [activeItem]="activeTab" (activeItemChange)="onTabChange($event)"
        styleClass="mb-3"></p-tabMenu>

      <!-- Mandates Table with checkbox selection -->
      <p-table [value]="taxes" [(selection)]="selectedTaxes" dataKey="id" [paginator]="true" [rows]="pageSize"
        [totalRecords]="totalRecords" [lazy]="true" (onLazyLoad)="onPageChange($event)" [loading]="loading"
        styleClass="p-datatable-gridlines p-datatable-striped" [responsiveLayout]="'scroll'"
        [tableStyle]="{ width: '100%' }">
      <ng-template pTemplate="header">
  <tr>
    <th style="width: 3rem">
      <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
    </th>
    <th>#</th>
    <th>Plate Number</th>
    <th>Driver Name</th>
    <th>Driver Phone</th>
    <th>License Number</th>
    <th>Model</th>
    <th>Color</th>
    <th>Year</th>
    <th>Status</th>
    <th>Actions</th>
  </tr>
</ng-template>

<ng-template pTemplate="body" let-taxi let-rowIndex="rowIndex">
  <tr>
    <td>
      <p-tableCheckbox [value]="taxi"></p-tableCheckbox>
    </td>

    <!-- Row Number -->
    <td>{{ (currentPage - 1) * pageSize + rowIndex + 1 }}</td>

    <!-- TaxiDto Fields -->
    <td>{{ taxi.plateNumber }}</td>
    <td>{{ taxi.driverName }}</td>
    <td>{{ taxi.driverPhone }}</td>
    <td>{{ taxi.driverLicenseNumber }}</td>
    <td>{{ taxi.vehicleModel }}</td>
    <td>{{ taxi.vehicleColor }}</td>
    <td>{{ taxi.vehicleYear }}</td>
    <td>{{ taxi.status }}</td>

    <td>
      <!-- Menu -->
      <p-menu
        #menu
        [popup]="true"
        [model]="getMenuItems(taxi)"
        appendTo="body"
      ></p-menu>

      <!-- Toggle Button -->
      <p-button
        icon="pi pi-ellipsis-v"
        styleClass="p-button-text"
        (click)="menu.toggle($event)"
      >
      </p-button>
    </td>
  </tr>
</ng-template>


        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="12" class="text-center">No mandates found.</td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>
  </div>
</app-main-layout>