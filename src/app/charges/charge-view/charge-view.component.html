<app-main-layout>
    <div id="product-view" class="flex justify-content-center">
        <p-card>
            <ng-template pTemplate="header">
                <div class="flex align-items-center gap-2">
                    <i class="pi pi-tag text-primary" style="font-size: 2rem;"></i>
                    <h2 class="m-0">Charge Details</h2>
                </div>
            </ng-template>

            <ng-container *ngIf="charge; else loadingOrEmpty">

                <!-- Basic Employee Info -->
                <p-divider align="center">
                    <span class="text-primary">Employee Information</span>
                </p-divider>

                <div class="p-fluid grid">
                    <div class="col-12 md:col-4">
                        <strong>Check Number:</strong>
                        <p>{{ charge.checkNumber || 'N/A' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Designation Code:</strong>
                        <p>{{ charge.designationCode || 'N/A' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Designation Name:</strong>
                        <p>{{ charge.designationName || 'N/A' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Job Class Code:</strong>
                        <p>{{ charge.jobClassCode || 'N/A' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Vote Code:</strong>
                        <p>{{ charge.voteCode || 'N/A' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Terms of Employment:</strong>
                        <p>{{ charge.termsOfEmployment || 'N/A' }}</p>
                    </div>
                </div>

                <!-- Salary Info -->
                <p-divider align="center">
                    <span class="text-primary">Salary Information</span>
                </p-divider>

                <div class="p-fluid grid">
                    <div class="col-12 md:col-4">
                        <strong>Basic Salary:</strong>
                        <p>{{ charge.basicSalary | currency:'Tsh ' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Net Salary:</strong>
                        <p>{{ charge.netSalary | currency:'Tsh ' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>One Third Amount:</strong>
                        <p>{{ charge.oneThirdAmount | currency:'Tsh ' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Total Employee Deduction:</strong>
                        <p>{{ charge.totalEmployeeDeduction | currency:'Tsh ' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Retirement Date:</strong>
                        <p>{{ charge.retirementDate || 'N/A' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Tenure:</strong>
                        <p>{{ charge.tenure }} months</p>
                    </div>
                </div>

                <!-- Loan Info -->
                <p-divider align="center">
                    <span class="text-primary">Charge Request Information</span>
                </p-divider>

                <div class="p-fluid grid">
                    <div class="col-12 md:col-4">
                        <strong>Requested Amount:</strong>
                        <p>{{ charge.requestedAmount | currency:'Tsh ' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Desired Deductible Amount:</strong>
                        <p>{{ charge.desiredDeductibleAmount | currency:'Tsh ' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Deductible Amount:</strong>
                        <p>{{ charge.deductibleAmount | currency:'Tsh ' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Product Code:</strong>
                        <p>{{ charge.productCode || 'N/A' }}</p>
                    </div>
                </div>

                <!-- Computed Charges -->
                <p-divider align="center">
                    <span class="text-primary">Charges & Calculations</span>
                </p-divider>

                <div class="p-fluid grid">
                    <div class="col-12 md:col-4">
                        <strong>Total Insurance:</strong>
                        <p>{{ charge.totalInsurance | currency:'Tsh ' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Total Processing Fee:</strong>
                        <p>{{ charge.totalProcessingFee | currency:'Tsh ' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Total Interest Rate Amount:</strong>
                        <p>{{ charge.totalInterestRateAmount | currency:'Tsh ' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Other Charges:</strong>
                        <p>{{ charge.otherCharges | currency:'Tsh ' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Net Loan Amount:</strong>
                        <p>{{ charge.netLoanAmount | currency:'Tsh ' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Total Amount To Pay:</strong>
                        <p>{{ charge.totalAmountToPay | currency:'Tsh ' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Eligible Amount:</strong>
                        <p>{{ charge.eligibleAmount | currency:'Tsh ' }}</p>
                    </div>
                    <div class="col-12 md:col-4">
                        <strong>Monthly Return Amount:</strong>
                        <p>{{ charge.monthlyReturnAmount | currency:'Tsh ' }}</p>
                    </div>
                </div>

                <!-- Metadata -->
                <p-divider align="center">
                    <span class="text-primary">Metadata</span>
                </p-divider>

                <div class="p-fluid grid">
                    <div class="col-12">
                        <strong>Created Date:</strong>
                        <p>{{ charge.createdDate}}</p>
                    </div>
                </div>

                <p-button label="Delete Charge" icon="pi pi-trash" severity="danger" (click)="deleteCharge(charge.id)" />
            </ng-container>

            <ng-template #loadingOrEmpty>
                <div class="text-center">
                    <p *ngIf="inProgress" class="text-primary">
                        <i class="pi pi-spin pi-spinner"></i> Loading charges details...
                    </p>
                    <p *ngIf="!inProgress" class="text-secondary">No charges data available.</p>
                </div>
            </ng-template>
        </p-card>
    </div>
</app-main-layout>